<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1,
      shrink-to-fit=no" />

  <!-- SEO Meta Tags -->
  <meta name="description" content="Create a stylish landing page for your business startup and get
      leads for the offered services with this HTML landing page template." />
  <meta name="author" content="Pranium" />

  <title>Login Page</title>
  <!-- Styles -->


  <!--Fontawesome CDN-->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
    integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,400i,600,700,700i&amp;subset=latin-ext"
    rel="stylesheet" />
  <link href="/css/bootstrap.css" rel="stylesheet" />
  <link href="/css/magnific-popup.css" rel="stylesheet" />
  <link href="/css/fontawesome-all.css" rel="stylesheet">
  <link href="/css/swiper.css" rel="stylesheet" />
  <link href="/css/magnific-popup.css" rel="stylesheet" />
  <link rel="stylesheet" href="/css/confirm_style.css">
  <link rel="stylesheet" href="/css/loader.css" />
  <!--Custom styles-->


  <!-- Favicon  -->
  <link rel="icon" href="/images/favicon.png" />


</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">


    <a class="navbar-brand prainum-text" href="#">
      <img src="/images/favicon.png" class="d-inline-block align-top" alt=""
        style="width: 30px !important ; height: 30px !important" />
      rainum
    </a>
    <!-- Mobile Menu Toggle Button -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
      aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-awesome fas fa-bars"></span>
      <span class="navbar-toggler-awesome fas fa-times"></span>
    </button>
    <!-- end of mobile menu toggle button -->

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
      </ul>
    </div>
  </nav>
  <!-- end of navbar -->
  <!-- end of navigation -->




  <div class="card" id="form" style="margin-top: 150px;">
    <!-- <dir > -->
    <!-- <form method="POST"> -->
    <h1>Change Password :<i class="fas fa-lock"></i></h1>
    Enter new password :
    <div>
      <input id="pass" class="form-control" type="password" name="newPassword" placeholder="Enter new password "
        style="margin-top: 10px; margin-bottom: 10px" required />
    </div>
    <br />
    <div style="text-align: center">
      <button onclick="request()" type="submit" class="btn btn-success " style="width: 40%;">Set</button>

      <!-- <input type="submit" value="OK " /> -->
      <p id="error" style="color: red"></p>
    </div>
    <!-- </form> -->
    <!-- </dir>  -->
  </div>

  <!-- success -->
  <div class="check_mark" id="check_mark">
    <div class="sa-icon sa-success animate">
      <span class="sa-line sa-tip animateSuccessTip"></span>
      <span class="sa-line sa-long animateSuccessLong"></span>
      <div class="sa-placeholder"></div>
      <div class="sa-fix"></div>
    </div>
  </div>

  <!-- end success -->
  <div id="loader"></div>
</body>
</script>
<!-- Scripts -->
<!-- jQuery for Bootstrap's JavaScript plugins -->
<script src="/js/jquery.min.js"></script>
<!-- Popper tooltip library for Bootstrap -->
<script src="/js/popper.min.js"></script>
<!-- Bootstrap framework -->
<script src="/js/bootstrap.min.js"></script>
<!-- jQuery Easing for smooth scrolling between anchors -->
<script src="/js/jquery.easing.min.js"></script>
<!-- Magnific Popup for lightboxes -->
<script src="/js/jquery.magnific-popup.js"></script>
<!-- Swiper for image and text sliders -->
<script src="/js/swiper.min.js"></script>

<!-- Validator.js - Bootstrap plugin that validates forms -->
<script src="/js/validator.min.js"></script>
<!-- <script src="/js/scripts.js"></script> -->
<!--  loader script -->
<script></script>
<script>
  function request() {
    let pass = $("#pass").val();

    if (pass.length < 7) {
      document.getElementById("error").innerHTML =
        "Password lenth shoud be more than 6 char .";
    } else if (pass) {
      document.getElementById("loader").style.display = "block";

      $.post(
        "/user/changePassword/<%=user%>", {
          newPassword: pass
        },
        (data) => {
          document.getElementById("loader").style.display = "none";

          if (data.message == "successful") {
            document.getElementById("error").style.fontSize = "25px";
            document.getElementById("error").style.color = "green";
            document.getElementById("error").innerHTML = data.message;
            document.getElementById("check_mark").style.display = "block";
            setTimeout(() => {
              window.location.href = "/signIn";
            }, 2000);
          } else {
            document.getElementById("error").innerHTML = data.message;
          }
        }
      );
    } else {
      document.getElementById("error").innerHTML =
        "Enter new password please !.";
    }
  }
</script>

</html>